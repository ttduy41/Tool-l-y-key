<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINHMODLAG V29 - T·ªîNG L·ª∞C TO√ÄN DI·ªÜN</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --accent: #00a884; --bg: #f0f2f5; --card: #ffffff; 
            --text: #1c1e21; --border: #e4e6eb; --header: #ffffff;
        }
        [data-theme="dark"] {
            --bg: #0b0e11; --card: #15191c; --text: #e4e6eb; 
            --border: #2d3136; --header: #15191c;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; }
        
        /* HEADER */
        header { position: fixed; top:0; width:100%; height:75px; background: var(--header); display:flex; align-items:center; padding:0 25px; box-shadow:0 2px 15px rgba(0,0,0,0.1); z-index:1000; box-sizing:border-box; border-bottom: 1px solid var(--border); }
        .logo { font-weight:900; font-size: 26px; color:var(--accent); letter-spacing: -1px; }
        .wallet { background:#1a1a1a; color:#00ff88; padding:8px 18px; border-radius:30px; font-weight:bold; margin-left:auto; border: 2px solid var(--accent); font-family: monospace; }

        /* SIDE MENU (3 G·∫†CH) */
        #sideMenu { position:fixed; top:0; left:-450px; width:420px; height:100%; background: var(--card); z-index:2000; padding:25px; transition:0.5s; box-shadow:15px 0 40px rgba(0,0,0,0.3); overflow-y:auto; box-sizing:border-box; border-right: 1px solid var(--border); }
        .menu-title { font-weight:900; font-size:13px; color: var(--accent); margin:20px 0 10px 0; display:block; text-transform:uppercase; border-left: 4px solid var(--accent); padding-left: 10px; }
        .history-box { background: var(--bg); border-radius:15px; padding:15px; border:1px solid var(--border); margin-bottom:15px; }
        .hist-table { width:100%; font-size:11px; border-collapse: collapse; }
        .hist-table td, .hist-table th { border-bottom:1px solid var(--border); padding:10px 5px; text-align:left; color: var(--text); }
        .theme-switch { display: flex; align-items: center; justify-content: space-between; background: var(--accent); color: white; padding: 12px 15px; border-radius: 12px; cursor: pointer; font-weight: bold; margin-bottom: 20px; }

        /* SHOP GRID */
        .container { margin-top:110px; padding:20px; display:grid; grid-template-columns:repeat(auto-fit, minmax(320px, 1fr)); gap:25px; max-width:1200px; margin-inline:auto; }
        .product-card { background: var(--card); padding:30px; border-radius:25px; border:1px solid var(--border); text-align:center; position:relative; }
        .stock-tag { position:absolute; top:20px; right:20px; font-size:11px; font-weight:bold; color:var(--accent); background: rgba(0,168,132,0.1); padding:4px 12px; border-radius:10px; }

        /* UI ELEMENTS */
        input, select, button, textarea { width:100%; padding:14px; margin:8px 0; border-radius:12px; border:1px solid var(--border); background: var(--card); color: var(--text); outline:none; font-family:inherit; box-sizing: border-box; }
        .btn-buy { background:var(--accent); color:#fff; border:none; font-weight:bold; cursor:pointer; text-transform:uppercase; }
        
        /* AUTH & MODALS */
        #authScreen { position: fixed; inset: 0; background: var(--accent); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: var(--card); padding: 40px; border-radius: 30px; width: 350px; text-align: center; }
        .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); z-index:5000; align-items:center; justify-content:center; backdrop-filter: blur(5px); }
        .modal-content { background: var(--card); padding:35px; border-radius:30px; width:450px; border:4px solid var(--accent); color: var(--text); position:relative; }
    </style>
</head>
<body data-theme="light">

    <div id="authScreen">
        <div class="auth-box">
            <h1 style="color:var(--accent); font-weight:900; margin:0; font-size:32px;">VINHMODLAG</h1>
            <p style="font-size:12px; color:#888; margin-bottom:20px;">H·ªÜ TH·ªêNG GIAO D·ªäCH T·ª∞ ƒê·ªòNG</p>
            <input type="text" id="uIn" placeholder="T√™n ƒëƒÉng nh·∫≠p...">
            <input type="password" id="pIn" placeholder="M·∫≠t kh·∫©u...">
            <div id="loginGroup">
                <button class="btn-buy" onclick="handleAuth('login')">ƒêƒÇNG NH·∫¨P</button>
                <p style="font-size:12px; cursor:pointer;" onclick="toggleAuth(false)">Ch∆∞a c√≥ t√†i kho·∫£n? <b>ƒêƒÉng k√Ω</b></p>
            </div>
            <div id="regGroup" style="display:none;">
                <button class="btn-buy" style="background:#333;" onclick="handleAuth('reg')">T·∫†O T√ÄI KHO·∫¢N</button>
                <p style="font-size:12px; cursor:pointer;" onclick="toggleAuth(true)">ƒê√£ c√≥ t√†i kho·∫£n? <b>ƒêƒÉng nh·∫≠p</b></p>
            </div>
        </div>
    </div>

    <div id="app" style="display:none">
        <header>
            <div onclick="openMenu()" style="font-size:28px; cursor:pointer; color: var(--accent);">‚ò∞</div>
            <div class="logo" style="margin-left:15px;">VINHMODLAG</div>
            <div class="wallet"><span id="uBal">0</span>ƒë</div>
        </header>

        <div id="sideMenu">
            <div class="theme-switch" onclick="toggleTheme()">
                <span>üí° GIAO DI·ªÜN S√ÅNG/T·ªêI</span>
                <span id="themeBtn">üåô</span>
            </div>

            <h2 style="margin:0;">üë§ Ch√†o s·∫øp, <span id="uNameDisp"></span></h2>
            
            <span class="menu-title">üí≥ N·∫†P TH·∫∫ C√ÄO (AUTO)</span>
            <div class="history-box">
                <select id="cardType"><option value="Viettel">Viettel</option><option value="Mobi">Mobifone</option><option value="Vina">Vinaphone</option><option value="Zing">Th·∫ª Zing</option></select>
                <select id="cardValue"><option value="10000">10,000ƒë</option><option value="20000">20,000ƒë</option><option value="50000">50,000ƒë</option><option value="100000">100,000ƒë</option><option value="200000">200,000ƒë</option><option value="500000">500,000ƒë</option></select>
                <input id="cSeri" placeholder="S·ªë Seri th·∫ª...">
                <input id="cPin" placeholder="M√£ PIN th·∫ª...">
                <button class="btn-buy" onclick="napThe()">G·ª¨I Y√äU C·∫¶U N·∫†P</button>
            </div>

            <span class="menu-title">üìú L·ªäCH S·ª¨ MUA H√ÄNG</span>
            <div class="history-box" style="max-height:150px; overflow-y:auto;">
                <table class="hist-table"><tbody id="buyHistBody"></tbody></table>
            </div>

            <span class="menu-title">üí∞ L·ªäCH S·ª¨ N·∫†P TH·∫∫</span>
            <div class="history-box" style="max-height:150px; overflow-y:auto;">
                <table class="hist-table">
                    <thead><tr><th>Lo·∫°i</th><th>M·ªánh gi√°</th><th>Tr·∫°ng th√°i</th></tr></thead>
                    <tbody id="cardHistBody"></tbody>
                </table>
            </div>

            <div id="adminPanel" style="display:none; background:#000; color:#0f8; padding:15px; border-radius:15px; font-family:monospace; margin-top:15px; border: 1px solid #0f8;">
                <b style="color:yellow;">üñ•Ô∏è VINHMOD ROBOT (.help)</b>
                <div id="serverLogs" style="height:100px; overflow-y:auto; margin:10px 0; font-size:11px; line-height:1.5;"></div>
                <input type="text" id="cmdAI" placeholder="L·ªánh Admin..." style="background:#111; color:#fff; border:1px solid #333;">
                <button onclick="runAI()" style="background:#0f8; color:#000; font-weight:bold; border:none; padding:8px; cursor:pointer;">TH·ª∞C THI</button>
            </div>
            
            <button onclick="logout()" style="color:red; background:none; border:1px solid red; margin-top:20px; font-weight:bold; cursor:pointer;">ƒêƒÇNG XU·∫§T</button>
        </div>

        <div id="overlay" onclick="closeMenu()" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); z-index:1500;"></div>
        <div class="container" id="shopGrid"></div>
    </div>

    <div id="keyInputBoard" class="modal">
        <div class="modal-content">
            <h2 style="margin-top:0;">üì¶ NH·∫¨P KHO H√ÄNG LO·∫†T</h2>
            <select id="targetProd">
                <option value="itachi">Itachi Ping V3</option>
                <option value="hopper">Hopper Plus</option>
                <option value="clone">Acc Clone Level 5</option>
            </select>
            <textarea id="inputKeys" rows="10" placeholder="M·ªói d√≤ng l√† 1 Key ho·∫∑c 1 Acc..."></textarea>
            <button class="btn-buy" onclick="executeSaveKeys()">L∆ØU V√ÄO KHO (SAVE)</button>
            <button onclick="document.getElementById('keyInputBoard').style.display='none'" style="border:none; background:none; color:gray; cursor:pointer;">H·ªßy b·ªè</button>
        </div>
    </div>

    <div id="buySuccessModal" class="modal">
        <div class="modal-content">
            <h1 style="color:var(--accent);">MUA TH√ÄNH C√îNG! ‚úÖ</h1>
            <p>H√†ng c·ªßa s·∫øp ·ªü d∆∞·ªõi ƒë√¢y:</p>
            <div id="receivedData" style="background:var(--bg); padding:20px; border-radius:15px; font-weight:900; border:2px dashed var(--accent); margin:15px 0; word-break:break-all; font-size:20px; color:var(--accent);"></div>
            <button class="btn-buy" onclick="document.getElementById('buySuccessModal').style.display='none';">ƒê√É NH·∫¨N H√ÄNG</button>
        </div>
    </div>

    <script>
        // --- DATA SYSTEM ---
        let db = JSON.parse(localStorage.getItem('VINHMOD_TOTAL_DB')) || {
            users: { "vinhmoddz": { pass: "vinhmoddz", bal: 10000000, admin: true, history: [], cards: [] } },
            products: [
                { id: 0, slug: "itachi", name: "Itachi Ping V3", type: "key", plans: { "1d": 10000, "7d": 50000, "30d": 150000, "vv": 500000 }, keys: [] },
                { id: 1, slug: "hopper", name: "Hopper Plus", type: "key", plans: { "1d": 15000, "7d": 70000, "30d": 200000, "vv": 700000 }, keys: [] },
                { id: 2, slug: "clone", name: "Acc Clone Level 5", type: "acc", plans: { "default": 20000 }, keys: [] }
            ],
            serverHistory: [],
            theme: "light"
        };
        let curU = localStorage.getItem('VINH_SESSION_KEY') || null;

        function save() {
            localStorage.setItem('VINHMOD_TOTAL_DB', JSON.stringify(db));
            if(curU) { renderShop(); renderHistory(); }
        }
        window.addEventListener("beforeunload", save);

        // --- THEME ENGINE ---
        function applyTheme() {
            document.body.setAttribute('data-theme', db.theme);
            document.getElementById('themeBtn').innerText = db.theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }
        function toggleTheme() {
            db.theme = db.theme === 'light' ? 'dark' : 'light';
            save(); applyTheme();
        }

        // --- AUTH ENGINE ---
        function toggleAuth(isL) {
            document.getElementById('loginGroup').style.display = isL ? 'block' : 'none';
            document.getElementById('regGroup').style.display = isL ? 'none' : 'block';
        }
        function handleAuth(t) {
            let u = document.getElementById('uIn').value.trim(), p = document.getElementById('pIn').value.trim();
            if(!u || !p) return alert("S·∫øp nh·∫≠p thi·∫øu th√¥ng tin r·ªìi!");
            if(t === 'reg') {
                if(db.users[u]) return alert("T√™n n√†y ƒë√£ c√≥ ng∆∞·ªùi ƒëƒÉng k√Ω!");
                db.users[u] = { pass: p, bal: 0, admin: false, history: [], cards: [] };
                save(); alert("ƒêƒÉng k√Ω th√†nh c√¥ng! M·ªùi s·∫øp ƒëƒÉng nh·∫≠p."); toggleAuth(true);
            } else {
                if(db.users[u] && db.users[u].pass === p) {
                    curU = u; localStorage.setItem('VINH_SESSION_KEY', u); initApp();
                } else alert("Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!");
            }
        }
        function initApp() {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('app').style.display = 'block';
            document.getElementById('uNameDisp').innerText = curU;
            document.getElementById('adminPanel').style.display = db.users[curU].admin ? 'block' : 'none';
            applyTheme(); save();
        }
        if(curU) initApp();

        // --- SHOP ENGINE ---
        function renderShop() {
            document.getElementById('uBal').innerText = db.users[curU].bal.toLocaleString();
            let grid = document.getElementById('shopGrid'); grid.innerHTML = "";
            db.products.forEach(p => {
                let opts = p.type === "key" ? `<select id="plan-${p.id}">${Object.keys(p.plans).map(k => `<option value="${k}">${k} - ${p.plans[k].toLocaleString()}ƒë</option>`).join('')}</select>` : `<h4>Gi√°: ${p.plans.default.toLocaleString()}ƒë</h4>`;
                grid.innerHTML += `<div class="product-card"><span class="stock-tag">Kho: ${p.keys.length}</span><h2>${p.name}</h2>${opts}<button class="btn-buy" onclick="buy(${p.id})">MUA NGAY</button></div>`;
            });
        }
        function renderHistory() {
            let u = db.users[curU];
            document.getElementById('buyHistBody').innerHTML = u.history.map(h => `<tr><td><b>${h.item}</b><br><small style="color:var(--accent)">${h.data}</small></td></tr>`).join('');
            document.getElementById('cardHistBody').innerHTML = u.cards.map(c => `<tr><td>${c.t}</td><td>${parseInt(c.v).toLocaleString()}ƒë</td><td style="color:orange">${c.s}</td></tr>`).join('');
        }
        function buy(id) {
            let p = db.products[id], plan = p.type === "key" ? document.getElementById(`plan-${id}`).value : "default", cost = p.plans[plan];
            if(db.users[curU].bal < cost) return alert("S·∫øp ∆°i h·∫øt ti·ªÅn r·ªìi, n·∫°p th√™m ƒëi!");
            if(p.keys.length === 0) return alert("M√≥n n√†y ƒëang h·∫øt h√†ng s·∫øp ∆°i!");
            let data = p.keys.shift();
            db.users[curU].bal -= cost;
            db.users[curU].history.unshift({ item: p.name, data: data });
            db.serverHistory.unshift({ t: new Date().toLocaleString(), u: curU, item: p.name, content: data });
            save();
            document.getElementById('receivedData').innerText = data;
            document.getElementById('buySuccessModal').style.display = 'flex';
        }
        function napThe() {
            let t = document.getElementById('cardType').value, v = document.getElementById('cardValue').value;
            let seri = document.getElementById('cSeri').value, pin = document.getElementById('cPin').value;
            if(!seri || !pin) return alert("Nh·∫≠p ƒë·ªß Seri v√† PIN th·∫ª!");
            db.users[curU].cards.unshift({ t: t, v: v, s: 'Ch·ªù duy·ªát', pin: pin, seri: seri });
            save(); alert("ƒê√£ g·ª≠i th·∫ª " + t + " th√†nh c√¥ng! Ch·ªù s·∫øp Vinh duy·ªát nh√©.");
        }

        // --- ROBOT AI ENGINE ---
        function runAI() {
            let cmd = document.getElementById('cmdAI').value.trim(), p = cmd.split(" ");
            let logs = document.getElementById('serverLogs');
            if(cmd === ".help") alert(".bangkey: N·∫°p h√†ng\n.maychu: Xem l·ªãch s·ª≠ mua\n.checkthe: Duy·ªát n·∫°p th·∫ª\n.emailmk: Xem pass kh√°ch\nset money [t√™n] [ti·ªÅn]");
            else if(cmd === ".bangkey") document.getElementById('keyInputBoard').style.display = 'flex';
            else if(cmd === ".maychu") {
                let r = db.serverHistory.map(h => `${h.u} mua ${h.item}`).join("<br>");
                logs.innerHTML = `<div style="color:#0f8">${r || 'Ch∆∞a c√≥ giao d·ªãch'}</div>` + logs.innerHTML;
            } else if(cmd === ".checkthe") {
                let r = ""; Object.keys(db.users).forEach(u => db.users[u].cards.forEach(c => { if(c.s==='Ch·ªù duy·ªát') r += `${u}: ${c.t} ${c.v}ƒë | PIN:${c.pin}<br>`; }));
                logs.innerHTML = `<div style="color:yellow">${r || 'Kh√¥ng c√≥ th·∫ª n√†o'}</div>` + logs.innerHTML;
            } else if(cmd === ".emailmk") {
                let r = ""; Object.keys(db.users).forEach(u => r += `${u}(${db.users[u].pass}) | `);
                logs.innerHTML = `<div>${r}</div>` + logs.innerHTML;
            } else if(cmd.startsWith("set money")) {
                if(db.users[p[2]]) { db.users[p[2]].bal += parseInt(p[3]); save(); alert("ƒê√£ b∆°m ti·ªÅn cho " + p[2]); }
            }
            document.getElementById('cmdAI').value = "";
        }
        function executeSaveKeys() {
            let slug = document.getElementById('targetProd').value, raw = document.getElementById('inputKeys').value.trim();
            let prod = db.products.find(x => x.slug === slug);
            if(raw && prod) {
                prod.keys.push(...raw.split('\n').filter(i => i.trim() !== ""));
                save(); alert("ƒê√£ n·∫°p kho th√†nh c√¥ng!");
                document.getElementById('keyInputBoard').style.display = 'none';
            }
        }

        function openMenu() { document.getElementById('sideMenu').style.left = '0'; document.getElementById('overlay').style.display = 'block'; }
        function closeMenu() { document.getElementById('sideMenu').style.left = '-450px'; document.getElementById('overlay').style.display = 'none'; }
        function logout() { localStorage.removeItem('VINH_SESSION_KEY'); location.reload(); }
    </script>
</body>
                  </html>
              
